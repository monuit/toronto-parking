# Production-style environment template

# App URLs
NODE_ENV=production
ASSET_BASE_URL=https://parking.example.com
MAP_BASE_URL=https://parking.example.com
APP_PUBLIC_URL=https://parking.example.com

# Postgres
DATABASE_URL=postgres://postgres:supersecure@postgres-host:5432/toronto_parking
CORE_DB_URL=${DATABASE_URL}
TILES_DB_URL=${DATABASE_URL}
PGUSER=postgres
PGPASSWORD=supersecure
PGHOST=postgres-host
PGPORT=5432
PGDATABASE=toronto_parking

# Redis
REDIS_URL=redis://default:supersecure@redis-host:6379/0
MAP_DATA_REDIS_NAMESPACE=toronto:map-data

# MapTiler proxy
MAPLIBRE_API_KEY=your-maptiler-api-key
MAPTILER_PROXY_MODE=proxy
MAPTILER_PROXY_PATH=/api/maptiler
MAPTILER_PROXY_TIMEOUT_MS=12000
MAPTILER_PROXY_MAX_RETRIES=2
MAPTILER_PROXY_BACKOFF_MS=500
MAPTILER_PROXY_FALLBACK_TIMEOUT_MS=20000

# PMTiles + MinIO
PMTILES_ENABLED=true
PMTILES_BUCKET=toronto-pmtiles
PMTILES_REGION=us-east-1
PMTILES_PREFIX=pmtiles
MINIO_PUBLIC_ENDPOINT=https://minio.example.com
MINIO_PRIVATE_ENDPOINT=https://minio-internal.example.com
MINIO_ACCESS_KEY_ID=minio-access-key
MINIO_SECRET_ACCESS_KEY=minio-secret
PMTILES_PUBLIC_BASE_URL=https://cdn.example.com/pmtiles
PMTILES_CDN_BASE_URL=https://cdn.example.com/pmtiles

# Cache and query tuning
SQL_STATEMENT_TIMEOUT_MS=250
CACHE_TTL_S=86400
MAP_TILE_PREWARM=1
MAP_TILE_REDIS_TTL=86400
GLOW_TILE_CACHE_VERSION=v1
GLOW_TILE_CACHE_TTL=86400
MAP_TILE_REDIS_MAX_BYTES=2000000

# Client runtime
VITE_TILES_MODE=mvt
VITE_TILES_BASE_URL=/tiles
VITE_MAPTILER_PROXY_PATH=/api/maptiler
VITE_PM_TILES_PREFIX=pmtiles
